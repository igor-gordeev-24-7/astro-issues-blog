---
// src/layouts/BaseLayout.astro

// –ü–æ–ª—É—á–∞–µ–º props
const { title, description, canonical } = Astro.props;

// –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
const pageTitle = title || 'Astro Issues Blog';
const pageDescription = description || '–ë–ª–æ–≥ –Ω–∞ Astro —Å GitHub Issues –∫–∞–∫ CMS';
const pageUrl = canonical || Astro.url.pathname;
const siteUrl = Astro.site || 'https://example.com';

// –§–æ—Ä–º–∏—Ä—É–µ–º URL –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
const ogImageUrl = new URL('/images/og-image.jpg', siteUrl).toString();
const canonicalUrl = new URL(pageUrl, siteUrl).toString();
---

<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–∞—Ç–µ–≥–∏ -->
  <title>{pageTitle}</title>
  <meta name="description" content={pageDescription} />
  
  <!-- Open Graph -->
  <meta property="og:title" content={pageTitle} />
  <meta property="og:description" content={pageDescription} />
  <meta property="og:type" content="website" />
  <meta property="og:url" content={canonicalUrl} />
  <meta property="og:image" content={ogImageUrl} />
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content={pageTitle} />
  <meta name="twitter:description" content={pageDescription} />
  
  <!-- Canonical -->
  <link rel="canonical" href={canonicalUrl} />
  
  <!-- –ò–∫–æ–Ω–∫–∏ -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  
  <!-- –°—Ç–∏–ª–∏ -->
  <link rel="stylesheet" href="/styles/main.css" />
  
  <!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ–º—ã -->
  <script>
    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–º—É –∏–∑ localStorage
    (function() {
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
    })();
  </script>
</head>
<body>
  <!-- –®–∞–ø–∫–∞ —Å–∞–π—Ç–∞ -->
  <header class="site-header">
    <slot name="header" />
  </header>
  
  <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
  <main class="site-main">
    <slot />
  </main>
  
  <!-- –ü–æ–¥–≤–∞–ª -->
  <footer class="site-footer">
    <slot name="footer" />
  </footer>
  
  <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç -->
  <script>
    // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã
    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      
      html.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –µ—Å–ª–∏ –æ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
      const themeButton = document.querySelector('.theme-toggle');
      if (themeButton) {
        const icon = themeButton.querySelector('i');
        if (icon) {
          icon.textContent = newTheme === 'light' ? 'üåô' : '‚òÄÔ∏è';
        }
        themeButton.setAttribute('aria-label', 
          newTheme === 'light' ? '–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Ç–µ–º–Ω—É—é —Ç–µ–º—É' : '–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Å–≤–µ—Ç–ª—É—é —Ç–µ–º—É'
        );
      }
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    document.addEventListener('DOMContentLoaded', function() {
      // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Ç–µ–º—ã
      const themeButton = document.querySelector('.theme-toggle');
      if (themeButton) {
        themeButton.addEventListener('click', toggleTheme);
      }
      
      // –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
      document.body.classList.add('loaded');
    });
  </script>
</body>
</html>